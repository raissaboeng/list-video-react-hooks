[{"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\App.js":"1","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\index.js":"2","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\VideoList.js":"3","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\Video.js":"4","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\NewVideoForm.js":"5","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\services\\TimeService.js":"6","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\VideoPlayer.js":"7","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\video\\VideoContext.js":"8","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\video\\VideoReducer.js":"9","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\services\\StorageService.js":"10"},{"size":422,"mtime":1612067667820,"results":"11","hashOfConfig":"12"},{"size":219,"mtime":1611982052378,"results":"13","hashOfConfig":"12"},{"size":704,"mtime":1612133411353,"results":"14","hashOfConfig":"12"},{"size":458,"mtime":1611983703090,"results":"15","hashOfConfig":"12"},{"size":1461,"mtime":1612126818412,"results":"16","hashOfConfig":"12"},{"size":254,"mtime":1611983576999,"results":"17","hashOfConfig":"12"},{"size":2460,"mtime":1612132557608,"results":"18","hashOfConfig":"12"},{"size":430,"mtime":1612126752899,"results":"19","hashOfConfig":"12"},{"size":579,"mtime":1612126707159,"results":"20","hashOfConfig":"12"},{"size":419,"mtime":1612126596365,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"di0239",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\App.js",[],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\index.js",[],["45","46"],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\VideoList.js",[],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\Video.js",[],["47","48"],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\NewVideoForm.js",[],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\services\\TimeService.js",[],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\ui\\VideoPlayer.js",["49"],"import React, {useRef, useEffect, useState, useContext, useMemo} from 'react';\r\nimport {TimeService} from '../data/services/TimeService';\r\nimport {videoStore} from '../data/video/VideoContext';\r\n\r\nexport default function VideoPlayer(){\r\n    const [videoState] = useContext(videoStore);\r\n    const video = videoState.selectedVideo;\r\n    const videoRef = useRef();\r\n    const progressTimer = useRef();\r\n    const [isPlaying, setPlay] = useState(false);\r\n    const [progress, setProgress] = useState(0);\r\n    const totalTime= useMemo(() => TimeService.formatTime(video.duration), [video]);\r\n\r\n\r\n    useEffect(() => {\r\n       const videoElement = videoRef.current;\r\n       videoElement.addEventListener('play', play);\r\n       videoElement.addEventListener('pause', pause);\r\n       videoElement.addEventListener('seeked', onProgress);\r\n\r\n       setTime(0);\r\n       pause();\r\n\r\n       return() => {\r\n        videoElement.removeEventListener('play', play);\r\n        videoElement.removeEventListener('pause', pause);\r\n        videoElement.removeEventListener('seeked', onProgress);\r\n       }\r\n    }, [video])\r\n\r\n    useEffect(() => {\r\n        clearInterval(progressTimer.current);\r\n        if(isPlaying){\r\n            progressTimer.current = setInterval(onProgress, 1000);\r\n        }\r\n        \r\n    }, [isPlaying])\r\n\r\n\r\n    function play(){\r\n        videoRef.current.play();\r\n        setPlay(true);\r\n    }\r\n\r\n    function pause(){\r\n        videoRef.current.pause();\r\n        setPlay(false);\r\n    }\r\n\r\n    function onProgress(){\r\n        setProgress(videoRef.current.currentTime);\r\n    }\r\n\r\n    function onChangeProgress(event){\r\n        setTime(event.target.value);\r\n    }\r\n\r\n    function setTime(time){\r\n        videoRef.current.currentTime = time;\r\n        onProgress();\r\n    }\r\n\r\n    return(\r\n        <div className=\"video-player\">\r\n            <video src={video.url} ref={videoRef} />\r\n            {video.url && (\r\n                <>\r\n                    <div className=\"controls\">\r\n                        <button onClick={isPlaying ? pause : play}>{isPlaying ? '||' : '|>'}</button>\r\n                        <span>{TimeService.formatTime(Math.round(progress))} / {totalTime}</span>\r\n                        <input type=\"range\" value={progress} onChange={onChangeProgress} min={0} max={video.duration} step={.1}/>\r\n                    </div>\r\n                    <h2>{video.title}</h2>\r\n                </>\r\n            )}\r\n            \r\n        </div>\r\n    );\r\n}","C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\video\\VideoContext.js",[],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\video\\VideoReducer.js",[],"C:\\Users\\ADM\\Desktop\\Projetos\\React\\list-video-react-hooks\\src\\data\\services\\StorageService.js",[],{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","replacedBy":"53"},{"ruleId":"50","replacedBy":"54"},{"ruleId":"52","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":29,"column":8,"nodeType":"58","endLine":29,"endColumn":15,"suggestions":"59"},"no-native-reassign",["60"],"no-negated-in-lhs",["61"],["60"],["61"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'setTime'. Either include it or remove the dependency array.","ArrayExpression",["62"],"no-global-assign","no-unsafe-negation",{"desc":"63","fix":"64"},"Update the dependencies array to be: [setTime, video]",{"range":"65","text":"66"},[1092,1099],"[setTime, video]"]